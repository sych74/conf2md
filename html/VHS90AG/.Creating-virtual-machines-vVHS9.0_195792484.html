<!DOCTYPE html>
<html>
    <head>
        <title>Virtuozzo Hybrid Server 9.0 Admin Guide : .Creating virtual machines vVHS9.0</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Virtuozzo Hybrid Server 9.0 Admin Guide</a></span>
                            </li>
                                                    <li>
                                <span><a href="Virtuozzo-Hybrid-Server-9.0-Admin-Guide_195791490.html">Virtuozzo Hybrid Server 9.0 Admin Guide</a></span>
                            </li>
                                                    <li>
                                <span><a href="Control-Panel-Administration_195792528.html">Control Panel Administration</a></span>
                            </li>
                                                    <li>
                                <span><a href="Virtual-Servers_195791495.html">Virtual Servers</a></span>
                            </li>
                                                    <li>
                                <span><a href="Create-Virtual-Server_195791500.html">Create Virtual Server</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Virtuozzo Hybrid Server 9.0 Admin Guide : .Creating virtual machines vVHS9.0
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Roksoliana Ben</span>, last modified on May 02, 2024
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <div class="contentLayout2">
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p><span>Virtual machines are created from </span><a href=".Templates-vVHS9.0_195791695.html">templates</a><span> and are deployed on </span><a href=".Compute-resources-vVHS9.0_195791811.html">compute resources</a><span> that provide them with CPU, disk, network, and other necessary resources. To create a virtual machine, you need to launch a wizard. The wizard walks you through several steps to get your virtual machine up and running. In this document, you can find a detailed guide on how to create a virtual machine, but first, take a look at the following section. </span></p><hr/><h2 id="id-.CreatingvirtualmachinesvVHS9.0-BeforeYouBegin"><strong>Before You Begin </strong></h2><p><span>Before you begin to create a virtual machine, take into consideration the following: </span></p><ul><li><p>You should have at least one <a href=".Compute-resources-vVHS9.0_195791811.html">compute resource</a> configured and attached to a <a href=".Managing-compute-zones-vVHS9.0_195791771.html">compute zone</a>, a <a href=".Data-stores-settings-vVHS9.0_195792145.html">data store</a> <span style="color: rgb(84,84,84);">–</span> to a <a href=".Data-store-zones-settings-vVHS9.0_195792148.html">data store zone</a> and compute resource or zone, a <a href=".Creating-and-managing-networks-vVHS9.0_195792075.html">network</a> <span style="color: rgb(84,84,84);">–</span> to a <a href=".Network-zones-vVHS9.0_195792093.html">network zone</a> and compute resource or zone, a <a class="createlink" href="/pages/createpage.action?spaceKey=VHS90AG&amp;title=2024-04-30_14-18-55_Create+and+Manage+Backup+Servers&amp;linkCreation=true&amp;fromPageId=195792484">backup server</a> <span style="color: rgb(84,84,84);">–</span> to a <a href=".Backup-server-zones-settings-vVHS9.0_195792133.html">backup server zone</a> and compute resource or zone, and a <a href=".Creating-and-managing-buckets-vVHS9.0_195792047.html">bucket</a> <span style="color: rgb(84,84,84);">– </span>to a user who creates a virtual machine. </p></li><li><span>The selected <a href=".Templates-vVHS9.0_195791695.html">template</a> should reside on a backup server attached to a compute resource or zone on which you want to build a virtual machine. </span></li><li><span>Learn more about the limitations of templates in the <a href="https://docs.onapp.com/vhs90sgosg" rel="nofollow">Supported Guest Operating Systems Guide</a>.</span></li><li><p><span>An <em>Estimated Price per Hour</em> in the wizard might be inaccurate if you don't have necessary <a href=".Permissions-vVHS9.0_195791917.html">permissions</a> enabled, such as <em>Show Compute Zones/Compute Resources on </em><em>Virtual Server Creation</em>; and if you select the <em>Any</em> option for network resources. </span></p></li></ul><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Ignore the options specified in your Control Panel but not mentioned in the documents.</p></div></div></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p><span>To create a virtual machine, follow the next procedure:</span></p>                    
    


<div class="rwui_steps ">
                        
    

<div class="rwui_step">
    <div class="rwui_item_number"></div>
    <div class="rwui_item_content">
        <p>Go to your Control Panel &gt; <strong>Cloud</strong> &gt; <strong>Virtual Servers</strong>.</p>
    </div>
</div>
                    
    

<div class="rwui_step">
    <div class="rwui_item_number"></div>
    <div class="rwui_item_content">
        <p>Click the <em><strong>+</strong> </em>or <strong>Create Virtual Server</strong> button to launch the wizard.</p>
    </div>
</div>
                    
    

<div class="rwui_step">
    <div class="rwui_item_number"></div>
    <div class="rwui_item_content">
        <p>Follow the step-by-step instructions below to complete the wizard.</p>
    </div>
</div>
                    
    

<div class="rwui_step">
    <div class="rwui_item_number"></div>
    <div class="rwui_item_content">
        <p>After you are finished, click the <strong>Create Virtual Server</strong> button. </p>
    </div>
</div>

</div>

</div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2 id="id-.CreatingvirtualmachinesvVHS9.0-step2Templates"><span class="confluence-anchor-link" id="id-.CreatingvirtualmachinesvVHS9.0-step2"></span><strong>Templates</strong></h2><hr/></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>The <strong>Templates</strong> step allows you to select a template from which to build your virtual machine. The template is extracted when a virtual machine is provisioned or when a <a href=".Managing-virtual-machine-backups-vVHS9.0_195791543.html">backup</a> is taken, using this template. While a template is being extracted, it is locked so that it can't be used simultaneously in other transactions. After the extraction is finished, the template is unlocked. If another transaction requires the locked template, the transaction will fail after five minutes of standby. If a transaction that locked a template eventually failed, it means that the extracted template is broken. The templates are stored at <code>/onapp/templates/your_template.tgz</code>, extracted templates <span style="color: rgb(84,84,84);">– </span>at <code>/onapp/backups/templates/your_template</code>, and locked templates <span style="color: rgb(84,84,84);">–</span> at <code>/onapp/backups/templates/your_template.lock</code>. </p><p>To select a template, follow the next procedure:</p><ol><li>Click the <em>Template Store</em> icon on the left to see templates that are available in this store. You can see the following details for each template: <br/><ul><li><em>Label</em></li><li><em>Min memory size </em>that is required to create a VM from this template</li><li><p><em>Min disk size </em>that is required to create a VM from this template</p><div id="expander-1820030249" class="expand-container"><div id="expander-control-1820030249" class="expand-control" aria-expanded="true"><span class="expand-icon aui-icon aui-icon-small aui-iconfont-chevron-down"></span><span class="expand-control-text">There are three minimum disk space requirements:</span></div><div id="expander-content-1820030249" class="expand-content"><ul><li>Linux  - 5 GB</li><li><span>Windows - 30 GB</span></li><li><span>Jumpbox - 9 GB</span></li></ul><p>Sizes for custom templates or templates with additional software installed could differ from the above. <br/><span>If the minimum disk space is not met, the virtual machine will fail to build.</span></p></div></div></li><li><p><em>Virtualization type </em></p></li><li><em>Estimated Price per Hour </em>that is calculated for a VM in Mode ON and Mode OFF</li></ul></li><li>Click a template to select it. </li><li><p>Click <strong>Next </strong>to proceed. </p></li></ol><div class="confluence-information-macro has-no-icon confluence-information-macro-information"><p class="title">Additional Information for Windows Templates</p><div class="confluence-information-macro-body"><p>The <strong>Windows Licensing Type</strong> box appears for Windows templates and includes license options that you configure for a corresponding <a href=".Managing-template-software-licenses-vVHS9.0_195791730.html">template store</a>. You can select one of the following license types:</p><ul><li><em>MAK</em> - the default licensing type <span style="color: rgb(34,34,34);">applicable</span> to all Windows-based virtual machines. <span>If you don't select the licensing type, <em>MAK</em> is set by default.</span></li><li><em>KMS</em> - <span>the licensing type </span><span style="color: rgb(34,34,34);">applicable to every virtual machine since Windows 7, Windows Server 2008, and the following Windows versions. </span>Click <em>KMS</em> and then select a <span>licensing <em>Server</em>.</span></li><li><em>User license - </em>type your license key</li></ul><p>When you create a virtual machine from a Windows template, c<span>onsider the following</span>:</p><ul><li>You can create Windows-based virtual machines without running Sysprep. Disable the <strong>Run Sysprep</strong> option while creating or editing a <span>destination <a href=".Managing-compute-zones-vVHS9.0_195791771.html">compute zone</a></span>.</li><li>If multiple virtual machines are deployed from the same template <span>without running Sysprep</span>, they will have identical security identifiers (SIDs) that can result in a system conflict.</li><li>You can't select KMS or your own license when you create a Windows virtual machine from a custom template. As a workaround, you can create a virtual machine from a template used for <a href=".Managing-templates-vVHS9.0_195791719.html">custom template creation</a>.</li><li><p>You can build a <strong>Windows 10/Windows Server 2016 </strong>virtual machine on <strong>KVM </strong><span style="color: rgb(34,34,34);"><strong>CentOS 6</strong> and <strong>CentOS 7 </strong></span>compute resources that run at least on the following processor:</p><ul><li>Ivy Bridge Intel® Xeon® Processor E Series v2 Family</li><li><p>AMD Opteron G2, G3, G4, G5, and G6</p></li><li><p>The <em>fsgsbase</em> CPU flag is required for a destination compute zone. For more information on CPU flags, see <a href=".Compute-resource-extended-CPU-configuration-vVHS9.0_195791846.html">Manage Extended CPU Configuration for Compute Zone</a>.</p></li></ul></li></ul></div></div></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2 id="id-.CreatingvirtualmachinesvVHS9.0-step3Properties"><span class="confluence-anchor-link" id="id-.CreatingvirtualmachinesvVHS9.0-step3"></span><strong>Properties</strong></h2><hr/></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>There are some obligatory and optional properties that you can provide for your virtual machine. The obligatory properties are marked with an asterisk on the list and the optional properties you can edit after creating a virtual machine.</p><p>Enter the following properties for your virtual machine: </p><ul><li><em>Label*</em> - enter the label of the virtual machine.</li><li><p><em>Hostname*</em> - enter the hostname of the virtual machine. The hostname can consist of letters [A-Z a-z], digits [0-9], and a dash [ - ]. For more info on hostname validation, refer to <a href="http://www.faqs.org/rfcs/rfc1123.html" class="external-link" rel="nofollow">RFC documentation</a>.</p><div id="expander-1175822765" class="expand-container"><div id="expander-control-1175822765" class="expand-control" aria-expanded="true"><span class="expand-icon aui-icon aui-icon-small aui-iconfont-chevron-down"></span><span class="expand-control-text">Additional Consideration for Windows</span></div><div id="expander-content-1175822765" class="expand-content"><p>The following symbols are not allowed for Windows-based virtual machines:</p><ul><li>Percent  [%]</li><li>Quotation marks [“ “]</li><li>Angle brackets [&lt;&gt;]</li><li>Vertical bar [ | ]</li><li>Caret [^]</li><li>Ampersand [&amp;]</li><li>Parentheses [( )]</li></ul></div></div></li><li><p><em>Domain -</em> enter the domain of the virtual machine. <span>For example, in </span><em><a href="http://test.onapp.com/" class="external-link" rel="nofollow">test.onapp.com</a></em><span> the </span><em>test </em>is a<span> hostname and </span><em><a href="http://onapp.com/" class="external-link" rel="nofollow">onapp.com</a> </em>is<span> a domain. If you don't enter a domain, the default value </span><em>localdomain </em><span>is used as follows </span><em><a href="http://test.onapp.com/" class="external-link" rel="nofollow">test.</a>localdomain</em><span>. </span>This parameter is not applicable to Windows virtual machines. </p></li><li><p><em>Time zone</em> (Windows) - select a time zone for a Windows virtual machine. Most operating systems imply that the hardware clock is in UTC, however, Windows implies a <em>localtime</em>. Therefore, you need to select a time zone for it to be properly handled on a compute resource level. </p></li><li><p><em>Password</em> - enter a secure password for the virtual machine. It can consist of 6-99 symbols, including letters [A-Z a-z], digits [0-9], dash [ - ], underscore [ _ ], and the following special characters:<span> </span>~ ! @ # $ * _ - + = ` \\ { } [ ] : ; ' , . ? /<span>. </span>You can use both lower and uppercase letters.<span> </span><span>If you don't enter a password, it will be generated automatically.</span></p></li><li><em>Password confirmation</em> - repeat the password to confirm it.</li><li><p><em>Encrypt password</em> - move the slider to the right to encrypt your password.</p></li><li><p><em>Encryption passphrase - </em>enter a passphrase for encryption.</p></li><li><p><em>Encryption passphrase confirmation - </em>repeat the passphrase for encryption.<em><br/></em></p><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>For more information on password encryption, see <a href="https://docs.onapp.com/display/FAQ/Virtual+Server+Password+Encryption">FAQ</a>.</p></div></div></li></ul><p>Click <strong>Next</strong>.</p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2 id="id-.CreatingvirtualmachinesvVHS9.0-step4Resources"><span class="confluence-anchor-link" id="id-.CreatingvirtualmachinesvVHS9.0-step4"></span><strong>Resources</strong></h2><hr/></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h3 id="id-.CreatingvirtualmachinesvVHS9.0-Youcandefinethefollowingresourcesforyourvirtualmachine:"><span>You can define the following resources for your virtual machine:</span></h3><h4 id="id-.CreatingvirtualmachinesvVHS9.0-ComputeResources"><strong>Compute Resources</strong></h4><ul><li><em>Compute Zone</em> - a compute zone where to build the virtual machine.</li><li><p><em>Compute Resource</em> - a compute resource from the compute zone. </p></li></ul><p>If the <em>Show Compute Zones/Compute Resources on </em><em>Virtual Server Creation </em>permissions are disabled, users cannot select compute resources for a virtual machine. The compute zone and resource are set automatically according to a virtualization type and other selected resources. The data store is set automatically according to the selected compute zone.</p><h4 id="id-.CreatingvirtualmachinesvVHS9.0-Resources"><strong>Resources</strong></h4><p>Select the following RAM and CPU resources for a virtual machine:<strong><br/></strong></p><ul><li><p><em>RAM</em> - enter the number of RAM. The maximum number depends on your bucket settings and<span> virtualization type. <span style="color: rgb(0,0,0);">As a rule, the maximum RAM value for the selected <em>Compute Resource</em> has to be the same as for cluster-free RAM in vCenter.</span></span></p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><span>If you create a FreeBSD virtual machine, s</span>et RAM to 512 MB. You can increase RAM later while <a href=".Managing-virtual-machines-vVHS9.0_195792186.html">editing the VM</a>. </p></div></div></li><li><em>CPU Cores</em> - enter the number of CPU cores. For KVM compute resources, this parameter sets CPU sockets by default, unless <em>CPU Topology</em> is enabled. When <em>CPU Topology</em> is enabled, this number specifies how many virtual cores the virtual machine will have.</li><li><p><em>CPU Priority</em> (or <em>CPU Units</em>) - enter the number of CPU Priority in %. If <em>CPU Units</em> are enabled on a user's bucket, the CPU Priority is replaced with CPU Units. Refer to <a href=".Billing-calculation-vVHS9.0_195792033.html">Billing calculation</a> for details on CPU Units and CPU Priority.</p></li></ul><p style="margin-left: 30.0px;">The following options are available only for virtual machines based on KVM, providing that a user has the <em>Enable CPU Topology </em>permission:</p><ul><li><em>Use CPU Topology</em> - move the slider to the right to enable<em> </em>CPU Topology.</li><li><p><em>CPU Sockets</em> - enter the number of how many sockets the CPU cores should be arranged into. This value will affect the number of<code> cores_per_socket</code>. </p><div class="confluence-information-macro confluence-information-macro-information"><p class="title">How to determine a correct number of CPU Sockets. </p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><span style="color: rgb(51,51,51);">If the CPU Topology is enabled, the CPU cores indicate several vCPUs - the maximum value that can be arranged into CPU sockets and cores per socket. If the CPU Topology is disabled, the CPU cores indicate the CPU socket value with one core per socket. When you enable CPU Topology, the following logic is applied to calculate CPU capacity:</span></p><ul><li class="_mce_tagged_br"><span style="color: rgb(51,51,51);">You enter the total number of CPU cores and CPU sockets. </span></li><li class="_mce_tagged_br"><span style="color: rgb(51,51,51);">The value of <code>cores_per_socket</code> is calculated automatically by the formula vCPUs = <code>cpu_sockets</code> x <code>cores_per_socket</code>. </span></li><li class="_mce_tagged_br"><span style="color: rgb(51,51,51);">As a result, if you set eight CPU cores and two CPU sockets, the <code>cores_per_socket</code> value will be set to four. </span></li></ul></div></div></li></ul><p><strong>Primary Disk</strong></p><p>Select the following properties for a primary disk: </p><ul><li><em>Primary data store</em> - select a data store for a primary disk.</li><li><em>Primary disk size</em> - enter a size for a primary disk.</li></ul><p><strong>Swap Disk</strong></p><p>Select the following properties for a swap disk: </p><ul><li><em>Swap data store - </em>select a data store for a swap disk.</li><li><em>Swap disk size - </em>enter a size for a swap disk.</li><li><em>Disable</em> - select the checkbox to disable a swap disk.</li></ul><p>You cannot add a swap disk to a Windows-based virtual machine. </p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p><strong>Network Configuration</strong></p><p>Before you apply network configuration, consider the following: </p><ul><li><p>When you create a virtual machine in Federation, you cannot set a network port speed to a value greater than indicated by a seller while adding a zone to Federation.</p></li><li><p>Since not every application supports IPv6, at least one IPv4 address must be allocated to a primary network interface. </p></li><li>The <em>Show only my IP addresses</em> <span>checkbox appears only if you select a specific network, not <em>Any</em> network. </span></li><li>The<em> Selected IP address</em> option is available in the wizard if it is enabled via <strong>Admin</strong> &gt; <strong>Settings</strong> &gt;<strong> Configuration</strong> &gt; <strong><a href=".Editing-system-configuration-vVHS9.0_195791608.html">System</a></strong> &gt; <em><span style="color: rgb(34,34,34);">Show IP address selection for new VS</span></em>.</li></ul><p><em>Network Interface 1</em></p><ul><li><em>Network</em> - select a network from which the VM should get the IP address.</li><li><em>IP net</em> - select an IP net from which the IP address should be assigned.</li><li><em>IP range</em> - select an IP range from which the IP address should be assigned.</li><li><p><em>IP address</em> - select an IP address to be assigned to the VM.</p><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>The first IP address you add will be marked as primary for the VM. You can further <a href=".Managing-virtual-machine-networks-vVHS9.0_195791556.html">edit the IP addresses assigned to VM</a>. </p></div></div></li><li><p><em>Show only my IP addresses</em> - select the checkbox to view only your own IP addresses.</p></li><li><em>Selected IP address - </em>if the option is available, you can also assign an IP address for the VM from the drop-down menu. Indicate compute resources and network to have the list of available IPs.</li><li><em>Port Speed</em> - set the port speed for the VM.</li></ul><p>Click<strong> Next</strong> to proceed to the following step of the wizard.</p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2 id="id-.CreatingvirtualmachinesvVHS9.0-step6Confirmation"><span class="confluence-anchor-link" id="id-.CreatingvirtualmachinesvVHS9.0-step6"></span><strong>Confirmation</strong></h2><hr/></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p><span>The </span><strong>Confirmation</strong><span> step allows you to apply the following settings: </span></p><ul><li><strong>Enable Automated Backup</strong> - move the slider to the right to create automatic backups of the virtual machine based on the settings from <a href=".Auto-backup-presets-settings-vVHS9.0_195792113.html">Auto-Backup Presets</a>.</li><li><strong>Build Virtual Server </strong>- move the slider to the to the right to automatically build the virtual machine. If you don't select this checkbox, you have to build your machine manually after it is created.</li><li><strong>Boot Virtual Server</strong> - move the slider to the right for the virtual machine to start up automatically.</li></ul><p>The <strong>Confirmation</strong> step also provides the configuration summary of the virtual machine, including information about the template, CPU cores, RAM, disk size, and network. <span style="color: rgb(38,38,38);">When you are finished, click the </span><strong>Create Virtual Server </strong><span style="color: rgb(38,38,38);">button to start the creation process. After you click the button, several transactions are run to complete the process. You can check the status of each transaction in the </span><a href=".Logs-vVHS9.0_195791993.html">Activity Log</a><span style="color: rgb(38,38,38);"> of the virtual machine. </span></p></div>
</div>
</div>
</div>
                    </div>

                                        
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 07, 2024 09:23</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
