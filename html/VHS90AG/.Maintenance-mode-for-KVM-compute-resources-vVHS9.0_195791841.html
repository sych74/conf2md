<!DOCTYPE html>
<html>
    <head>
        <title>Virtuozzo Hybrid Server 9.0 Admin Guide : .Maintenance mode for KVM compute resources vVHS9.0</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Virtuozzo Hybrid Server 9.0 Admin Guide</a></span>
                            </li>
                                                    <li>
                                <span><a href="Virtuozzo-Hybrid-Server-9.0-Admin-Guide_195791490.html">Virtuozzo Hybrid Server 9.0 Admin Guide</a></span>
                            </li>
                                                    <li>
                                <span><a href="Control-Panel-Administration_195792528.html">Control Panel Administration</a></span>
                            </li>
                                                    <li>
                                <span><a href="Compute-Resources_195791812.html">Compute Resources</a></span>
                            </li>
                                                    <li>
                                <span><a href="Maintenance-Mode-for-KVM-Compute-Resources_195791842.html">Maintenance Mode for KVM Compute Resources</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Virtuozzo Hybrid Server 9.0 Admin Guide : .Maintenance mode for KVM compute resources vVHS9.0
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Roksoliana Ben</span>, last modified on May 02, 2024
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <div class="contentLayout2">
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>Compute resources provide hardware for virtual machines, ensuring highly efficient use of available hardware. Below you can find<span style="color: rgb(0,0,0);"> the </span>solutions regarding compute resource maintenance.</p><p>If you need to take a compute resource out of service, fix or upgrade it, use the maintenance mode<span style="color: rgb(0,0,0);"> featu</span>r<span style="color: rgb(0,0,0);">e. The VMs will be m</span>igrated to another compute resource and you can easily maintain your <span style="color: rgb(0,0,0);">hardware.</span> Be aware that after maintenance, VMs will not be migrated back to your compute resource automaticall<span style="color: rgb(0,0,0);">y. Yo</span>u should <a href=".Managing-virtual-machines-vVHS9.0_195792186.html">manually bring VMs back</a><span> to this compute resource.</span></p><p><span>If a compute resource is overloaded, but you do not want to take it out of service, you can enable or disable the ability to install/boot virtual machines on the compute resource using the <em>Enabled</em> slider while <a href=".Managing-compute-resources-vVHS9.0_195791819.html">editing compute resource</a>. Virtual machines that are already created on this compute resource will not be migrate<span style="color: rgb(0,0,0);">d and will be running.</span></span></p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><ul><li>Maintenance mode is applicable only to KVM compute resources.</li><li><span>Ensure that the <em>Set maintenance mode for any compute resource</em> </span><span>permission is on before managing maintenance mode. For more information, refer to the </span><a href=".Permissions-vVHS9.0_195791917.html">Permissions</a><span> </span><span>section of this guide.</span></li></ul></div></div><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Ignore the options specified in your Control Panel but not mentioned in the documents.</p></div></div></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<hr/><h2 id="id-.MaintenancemodeforKVMcomputeresourcesvVHS9.0-EnableMaintenanceMode">Enable Maintenance Mode</h2><ol><li>Go to your Control Panel &gt; <strong>Admin</strong><span> &gt; </span><strong>Settings </strong><span>menu.</span></li><li>Click the <strong>Compute Resources </strong><span>icon.</span></li><li>Click the label of the compute resource you are interested in.</li><li>Click the<strong> Actions</strong><span> button, point to </span><strong>Resource</strong> <strong>Options</strong>, <span>and select </span><strong>Enable Maintenance Mode</strong><span>. </span></li><li>On the screen that follows:<br/><ul><li>Move the first slider to the right if you want to stop all virtual machines that cannot be migrated to another compute resource. This might happen because there are not enough resources on other compute resources in this zone for all VMs, or there is only one compute resource in a zone. All VMs, which have the hot migration option enabled, are attempted to be migrated to another compute resource. Note that smart servers can be migrated using only the cold migration option.</li><li>Move the second slider to the right if you are sure you want to enable maintenance mode for this compute resource.<br/><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail confluence-content-image-border image-center" draggable="false" width="250" src="attachments/195791841/195791840.png" data-image-src="attachments/195791841/195791840.png" data-unresolved-comment-count="0" data-linked-resource-id="195791840" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Enable.PNG" data-base-url="https://docs.onapp.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="195791841" data-linked-resource-container-version="5" alt=""></span></li></ul></li><li>Click the <strong>Confirm </strong>button. The action will be confirmed<span style="color: rgb(0,0,0);"> only if both options are enabled.</span></li></ol><p>VMs will be sequentially migrated to other compute resources within the compute zone to which your compute resource is assigned. The compute resource will be marked as in maintenance mode and you will be able to fix or upgrade it. </p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Be aware that KVM-based VMs are migrated to KVM compute resources within one compute zone.</p></div></div></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<hr/><h2 id="id-.MaintenancemodeforKVMcomputeresourcesvVHS9.0-DisableMaintenanceMode">Disable Maintenance Mode</h2></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>To bring a compute resource back online, switch maintenance mode off:</p><ol><li>Go to your Control Panel &gt; <strong>Admin</strong> &gt; <strong>Settings </strong>menu.</li><li>Click the <strong>Compute Resources </strong>icon.</li><li>Click the label of the compute resource you are interested in.</li><li>Click the<strong> Actions</strong><span> button, point to </span><strong>Resource Options</strong>, <span>and select </span><strong>Disable Maintenance Mode</strong><span>.</span></li></ol><p>If you want to return VMs to the compute resource from which they were migrated, you should <a href=".Managing-virtual-machines-vVHS9.0_195792186.html">manually bring VMs back</a><span> to this compute resource.</span></p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><ul><li>Disabling maintenance mode initiates an automatic reboot of a<span> compute resource</span>.</li><li>To avoid damaging a vStorage cluster when compute resources are therein, disable maintenance mode for each compute resource singly, not simultaneously, taking a few-minute pause (5-10 minutes) and ensuring the node is up.</li></ul></div></div></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<hr/><h2 id="id-.MaintenancemodeforKVMcomputeresourcesvVHS9.0-MaintenanceModeandExtendedCPUConfiguration">Maintenance Mode and Extended CPU Configuration</h2></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>If the compute zone has <a href=".Compute-zone-extended-CPU-configuration-vVHS9.0_195791803.html">extended CPU configuration</a> (CPU model/flags) and one of the compute resources from this compute zone goes to maintenance mode, there are several scenarios that can take effect when the resource goes back online:</p><ul><li>If the compute resource after maintenance has the same CPU performance characteristics as other compute resources in a compute zone, the CPU model remains the same for this compute zone.</li></ul><ul><li>If the compute resource after maintenance has better CPU performance characteristics than other compute resources in a compute zone, the CPU model remains the same for this compute zone.</li></ul><ul><li><p>If the compute resource after maintenance has worse CPU performance characteristics than other compute resources in a compute zone, the CPU model is downgraded for this compute zone.</p><div class="confluence-information-macro confluence-information-macro-tip"><span class="aui-icon aui-icon-small aui-iconfont-approve confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><span>Consider <a href=".Managing-compute-zones-vVHS9.0_195791771.html"> assigning </a>a compute resource </span><span>with worse or better CPU performance characteristics to another compute zone, where a CPU model would correspond to the actual CPU performance. </span></p></div></div></li></ul></div>
</div>
</div>
</div>
                    </div>

                                                            <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/195791841/195791840.png">Enable.PNG</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 07, 2024 09:23</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
