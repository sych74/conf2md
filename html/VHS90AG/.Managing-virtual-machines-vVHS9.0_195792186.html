<!DOCTYPE html>
<html>
    <head>
        <title>Virtuozzo Hybrid Server 9.0 Admin Guide : .Managing virtual machines vVHS9.0</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Virtuozzo Hybrid Server 9.0 Admin Guide</a></span>
                            </li>
                                                    <li>
                                <span><a href="Virtuozzo-Hybrid-Server-9.0-Admin-Guide_195791490.html">Virtuozzo Hybrid Server 9.0 Admin Guide</a></span>
                            </li>
                                                    <li>
                                <span><a href="Control-Panel-Administration_195792528.html">Control Panel Administration</a></span>
                            </li>
                                                    <li>
                                <span><a href="Virtual-Servers_195791495.html">Virtual Servers</a></span>
                            </li>
                                                    <li>
                                <span><a href="Manage-Virtual-Servers_195791509.html">Manage Virtual Servers</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Virtuozzo Hybrid Server 9.0 Admin Guide : .Managing virtual machines vVHS9.0
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Roksoliana Ben</span>, last modified on May 02, 2024
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <div class="contentLayout2">
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>Virtual machines are based on templates and are deployed on сompute resources. Compute resources give them access to CPU, disk, and network resources. OnApp supports two kinds of storage for virtual machines: traditional centralized SANs and the new distributed block storage functionality introduced with OnApp Storage, in which local disks in сompute resources provide the physical storage space allocated to virtual machines. In each case, the OnApp platform creates virtual data stores from the physical resources and uses these to provide virtual machines with virtual disks. This document provides information on how you can manage virtual machines in your OnApp сloud. </p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Ignore the options specified in your Control Panel but not mentioned in the documents.</p></div></div><hr/><h2 class="with-breadcrumbs" id="id-.ManagingvirtualmachinesvVHS9.0-viewToviewvirtualmachines"><span class="confluence-anchor-link" id="id-.ManagingvirtualmachinesvVHS9.0-view"></span>To view virtual machines</h2></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<ol><li><span>Go to your Control Panel &gt; </span><strong>Cloud</strong><span> &gt;</span><strong> Virtual Servers </strong><span>menu to see an overview of all virtual machines in the cloud.</span></li><li><span>The page that loads will show the list of VMs together with their: </span></li><ul><li><span>Operating system</span></li><li><span>Label - click to see the VM details.</span></li><li><span>VIP status - click the icon to enable/disable the VIP status of a particular VM.</span></li><li><span>IP addresses</span></li><li><span>Allocated disk size</span></li><li><span>RAM</span></li><li><span>Backups - the number of backups and the space these backups take.</span></li><li><span>Compute resource - the label of compute resource with which VM is associated.</span></li><li><span>User - the owner of this VM. Click the user name to see the owner details.</span></li><li><span>CPU(s) - the number of CPU(s) included.</span></li><li><span style="color: rgb(255,0,0);"><span style="color: rgb(51,51,51);">Guest Tools - shows if the guest tools are installed and started. For more information about guest tools, refer to the</span> <a href=".Managing-guest-tools-vVHS9.0_195791583.html">Managing guest tools</a> <span style="color: rgb(51,51,51);">section.</span></span></li><li><span>Power status - click the on/off buttons to change the status.</span></li></ul><li><span>Click the </span><strong>Actions</strong><span> button next to the VM for quick access to the list of VM actions (the list of actions displayed depends on the VM status):</span></li></ol><ul><li><span>Recovery reboot</span></li><li><span>Power off a VM</span></li><li><span>CPU usage</span></li><li><span>Backups</span></li><li><span>Shutdown</span></li><li><span>Startup</span></li><li><span>Recovery start up</span></li><li><span>Unlock</span></li><li><span style="color: rgb(51,51,51);">Console</span></li></ul><p>If you are viewing the VMs list on a narrow screen, you can customize the way the table is displayed by clicking the actions icon at the top of the table. In the drop-down list that appears, check the columns you want to be displayed and click <strong>Apply</strong>. The narrower your screen is, the more unchecked columns will be hidden from the table. If your screen is too narrow to fit all the columns you have checked, a scrollbar will appear at the bottom of the VMs list. You can always alter your column selection later. Note that by default the VIP and Backups columns are not visible in the table on narrow screens.</p><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Column selection is currently set for one browser. If you have checked some columns in one browser and opened the list in some other browser, the column selection will be the default one for that other browser.</p></div></div><p><span>To search for a particular virtual machine, click the <strong>Search</strong> icon at the top of the VM list. When the search box appears, type the text you want to search for and click the <strong>Search</strong> button.</span></p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<hr/><h2 class="with-breadcrumbs" id="id-.ManagingvirtualmachinesvVHS9.0-view-detailsToviewvirtualmachinedetails"><span class="confluence-anchor-link" id="id-.ManagingvirtualmachinesvVHS9.0-view-details"></span>To view virtual machine details</h2></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p><br/></p><ol><li>Go to your Control Panel &gt; <strong>Cloud</strong> &gt; <strong>Virtual Servers </strong>menu.</li><li>Click the label of the virtual machine you're interested in.</li><li>The screen that appears loads the <span class="confluence-link"><a href="#id-.ManagingvirtualmachinesvVHS9.0-vm_properties">VM properties</a></span>, <a href="#id-.ManagingvirtualmachinesvVHS9.0-notes">notes</a>, <span class="confluence-link">activity log,</span> and <a href="#id-.ManagingvirtualmachinesvVHS9.0-vs_management">tools for managing</a> your VM.</li></ol><h3 id="id-.ManagingvirtualmachinesvVHS9.0-vm_propertiesVMProperties"><span class="confluence-anchor-link" id="id-.ManagingvirtualmachinesvVHS9.0-vm_properties"></span>VM Properties</h3><p>The VM properties page gives a general overview of the VM details:</p><ul><li><span> <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" width="30" src="attachments/195792186/195792185.png" data-image-src="attachments/195792186/195792185.png" data-unresolved-comment-count="0" data-linked-resource-id="195792185" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-7_16-34-16.png" data-base-url="https://docs.onapp.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="195792186" data-linked-resource-container-version="8" alt=""></span>- VIP status, click the icon to change the status.</span></li><li><span>Template this VM is built on.</span></li><li><strong>ON</strong><span>, </span><strong>OFF</strong><span>, and </span><strong>REBOOT</strong><span> buttons - the greened-out button indicates VM's power status.</span></li></ul><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><span>Clicking the OFF button performs a graceful shutdown and then powers off the virtual machine after the timeout is set in </span><a href=".Configuration-settings-vVHS9.0_195791605.html"><span>configuration settings</span></a><span>.</span></p></div></div><ul><li><p><em><span>Auto-backups</span></em><span> - move the slider to enable/disable automatic backups for this VM. </span></p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><span>If the automation options weren’t enabled during this virtual machine creation, you’ll be redirected to the form where you can configure them.</span></p></div></div></li></ul><ul><li><span style="color: rgb(255,0,0);"><span style="color: rgb(51,51,51);"><em>Guest Tools</em> - shows if the guest tools are installed and started. For more information about guest tools, refer to the</span> <a href=".Managing-guest-tools-vVHS9.0_195791583.html">Managing guest tools</a> <span style="color: rgb(51,51,51);">section. </span></span></li><li><em><span>FQDN</span></em><span> - fully qualified domain name.</span></li><li><em><span>Compute Resource</span></em><span> - click the compute resource name to see its details.</span></li><li><em><span>Login</span></em><span> - </span><span>credentials for this VM. <span style="color: rgb(51,51,51);">You<span style="color: rgb(255,0,0);"><span style="color: rgb(51,51,51);"> can copy the root password to the clipboard with</span> <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" width="26" src="attachments/195792186/195792184.png" data-image-src="attachments/195792186/195792184.png" data-unresolved-comment-count="0" data-linked-resource-id="195792184" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2022-5-6_14-20-35.png" data-base-url="https://docs.onapp.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="195792186" data-linked-resource-container-version="8" alt=""></span></span>.</span></span></li><li><em><span>Owner</span></em><span> - owner of the VM, click to see the details.</span></li><li><em><span>IP Addresses</span></em><span>. Only the first five IP addresses are displayed on the virtual machine properties page. To view the list of all virtual machine IP addresses, mouse over the IP addresses area or go to the </span><strong>Networking </strong><span>&gt; </span><strong>IP addresses</strong><span> tab. To view external IP addresses, you have to add them via API call first. To add an external IP address, refer to the </span><a href="https://docs.onapp.com/apim/latest/ip-addresses/external-ip-addresses/add-edit-external-ip-address" rel="nofollow"><span>Add/Edit External IP Address</span></a><span> section of the API Guide. Once you've added an IP address, you can view it after the </span><strong>-&gt;</strong><span> sign. For example, </span><span>7.7.0.17 -&gt; 8.8.8.7</span></li><li><em><span>Estimated Price per hour</span></em><span> - this sum does not take into consideration the free limits for resources set in the bucket. Therefore, the final price for the machine might differ from the sum indicated here.</span></li><li><em><span>CPU(s)</span></em></li><li><em><span>CPU priority or CPU units</span></em></li><li><em><span>Disk Size</span></em><span> - the total amount of disk size</span></li><li><em><span>Memory</span></em></li><li><em><span>Disk backups</span></em><span> - the total amount of backups</span></li><li><span>CPU usage chart</span></li><li><span>Network usage (data sent and data received in GB per hour) chart</span></li></ul></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h3 id="id-.ManagingvirtualmachinesvVHS9.0-notesNotes"><span class="confluence-anchor-link" id="id-.ManagingvirtualmachinesvVHS9.0-notes"></span>Notes</h3><p>The Notes section lists brief comments or reminders for a VM. You can add either Admin's or User's notes. The Admin's note will be available to cloud administrators.</p><p><span class="confluence-anchor-link" id="id-.ManagingvirtualmachinesvVHS9.0-vs_management"></span><span>VM Management</span></p><ul><li><span>Click </span><strong>Actions</strong><span> to see the menu with the VM management options.</span></li><li>Use the top menu to manage your virtual machines' <a href=".Managing-virtual-machine-statistics-vVHS9.0_195791567.html">statistics</a>/<a href=".Managing-virtual-machine-networks-vVHS9.0_195791556.html">networking</a>/<a href=".Managing-virtual-machine-disks-vVHS9.0_195791550.html">storage</a> options.</li></ul></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<hr/><h2 id="id-.ManagingvirtualmachinesvVHS9.0-rebuildRebuilding/buildingvirtualmachinemanually"><span class="confluence-anchor-link" id="id-.ManagingvirtualmachinesvVHS9.0-rebuild"></span>Rebuilding/building virtual machine manually</h2></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>To build/rebuild a virtual machine, <em>Build/rebuild virtual server</em> and <em>Manage public templates</em> <a href=".Permissions-vVHS9.0_195791917.html">permissions</a> must be enabled.</p></div></div><p>If you haven't checked the <strong>Build Virtual Server</strong> option during the VM <a href=".Creating-virtual-machines-vVHS9.0_195792484.html">creation process</a>, you will have to do this manually after the VM has been created. Building a virtual machine is the process of allocating physical resources to that VM.</p><p><br/>To build a virtual machine manually or rebuild the VM on the same (or another) template:</p><ol><li>Go to your Control Panel &gt; <strong>Cloud</strong> &gt; <strong>Virtual Servers</strong> menu.</li><li>Click the label of the virtual machine you're interested in.</li><li>On the screen that appears, click the <strong>Actions </strong>button, point to <strong>Options</strong>, and then click <strong>Rebuild Virtual Server.</strong></li><li><p>On the screen that pops up, use the drop-down menu to choose a template with which to build the VM.</p><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>It is not possible to rebuild a Linux-based virtual machine to FreeBSD templates.</p><p>It is not possible to rebuild a Windows-based virtual machine to Linux/FreeBSD template and vice versa.</p></div></div></li><li>Move the <strong>Start VS after rebuild </strong>slider to the right if you want to have your VM started automatically after it is built.</li><li>Select the following options if you selected Windows<br/><strong>Windows</strong><ul><li><strong>Windows Licensing type</strong> - KMS, MAK, or OWN.</li><li><strong>Licensing key</strong> - input license if you selected OWN licensing type.</li><li>Select <strong>Server</strong> for KMS licensing type.</li></ul></li><li>Click the <strong>Rebuild Virtual Server</strong> button to finish.</li></ol></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><ul><li>To successfully rebuild the VM, you have to approve this transaction as an administrator. To approve the transaction, go to your Control Panel &gt; <strong>Admin</strong> &gt; <strong>Logs</strong> menu and click the <strong>Approve</strong> button.</li><li>After you rebuild your template all data will be lost.</li><li>If the VM was built from a template with system service add-ons assigned, all added system service add-ons will be removed from the VM after the rebuild. </li></ul></div></div></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<hr/><h2 class="with-breadcrumbs" id="id-.ManagingvirtualmachinesvVHS9.0-edit-vsEditingvirtualmachine"><span class="confluence-anchor-link" id="id-.ManagingvirtualmachinesvVHS9.0-edit-vs"></span>Editing virtual machine</h2></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>You can edit resources for all VMs. Depending on the template it is built on, some VMs can have their CPU or RAM or both resized without needing to be powered off (&quot;resize without reboot&quot;). If the VM template allows resizing of the required resource without the reboot, the resize should be completed automatically: you will be returned to the VM details screen and see a message indicating the resize was successful. If the template does not allow this, you will be asked to confirm that the VM will need rebooting so that the resize can take place. </p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><ul><li>Windows virtual machines cannot be resized without a reboot.</li><li>It is not possible to increase the VM RAM beyond its <code>max_memory</code> value without rebooting the machine.</li><li>If the template on which the VM is built has the value 'YES' for the resize without reboot option, it might denote that either CPU or RAM can be changed without rebooting the machine. Some templates support the resize without reboot only for either CPU or RAM while in other templates both CPU and RAM can be changed without rebooting the machine. The virtualization type also influences the resize without reboot option.</li></ul></div></div><p>To adjust VM resources:</p><ol><li>Go to your Control Panel &gt; <strong>Cloud</strong> &gt; <strong>Virtual Servers</strong> menu.</li><li>Click the label of the machine you want to resize, to show its details screen.</li><li>Click the<strong> Actions </strong>button, point to <strong>Options</strong>, and select the <strong>Edit Virtual Server</strong> link.<p><em>For virtual machines built by selecting resources manually:</em><br/><br/></p><ul><li><p class="auto-cursor-target">Change CPU cores, CPU priority/units, and RAM values.</p></li></ul><em>For VMs based on KVM compute resources only, providing the Enable CPU topology permission is switched on for the user:</em></li></ol><ul><li style="list-style-type: none;background-image: none;"><ul><li>Change the number of CPU sockets.<br/><br/></li></ul></li></ul><div class="confluence-information-macro confluence-information-macro-information"><p class="title">Setting the correct amount of CPU sockets</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><ul><li style="list-style-type: none;background-image: none;"><ul><li class="_mce_tagged_br"><span>Set the total amount of virtualized CPUs and the number of sockets. </span></li><li class="_mce_tagged_br"><span>The value of <code>cores_per_socket </code>will be calculated automatically by the formula vCPUs  = <code>cpu_sockets</code> x <code>cores_per_socket</code>. </span></li><li class="_mce_tagged_br"><span>Thus, if you set the vCPU value to <code>8</code>, and the CPU sockets to <code>2</code>, this means that the <code>cores_per_socket</code> value will be set to<code> 4</code>.</span></li></ul></li></ul></div></div><p style="margin-left: 30.0px;">You can also edit the <em>Time Zone</em> parameter for all Windows KVM virtual machines. After you edit the machine's time zone, you need to stop and then start up the VM. Currently, the time zone is set at the compute resource side only. Therefore, users need to set the target time zone inside a Windows VM manually. Setting the correct time zone at the compute resource side helps to keep correct time inside a VM after starting it if time synchronization is not completed for some reason.</p><p style="margin-left: 30.0px;">After changing VM resources you can see two prices per this VM per hour, depending on VM power status (on/off).</p><ul><li style="list-style-type: none;background-image: none;"><ul><li>Click the <strong>Save </strong>button.</li></ul></li></ul></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<hr/><h2 id="id-.ManagingvirtualmachinesvVHS9.0-cloneCloningvirtualmachine"><span class="confluence-anchor-link" id="id-.ManagingvirtualmachinesvVHS9.0-clone"></span>Cloning virtual machine</h2></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p><span>You can create a clone based on the same resources as the origin virtual machine. The cloned virtual machine inherits resources from the origin as follows. </span></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 75.0663%;"><colgroup><col style="width: 34.6596%;"/><col style="width: 65.3404%;"/></colgroup><tbody><tr><th class="confluenceTh">Resource</th><th class="confluenceTh"><span>Cloned virtual machine</span></th></tr><tr><td colspan="1" class="confluenceTd"><p>Owner</p></td><td colspan="1" class="confluenceTd"><span>The same as the origin virtual machine.</span></td></tr><tr><td class="confluenceTd"><p>Properties: <span>hostname, password, and label</span></p></td><td class="confluenceTd"><p><span>You can change the properties while cloning a KVM VM. By default, if you clone a virtual machine without changing the values of the hostname, password, and label:</span></p><ul><li><span>The hostname remains the same as it is in the origin virtual machine.</span></li><li><span>The password acquires random values.</span></li><li><span>The label is the same as the origin virtual machine's label but with <em>Clone</em> in the label. For example, <em>Clone Origin Label</em>.</span></li></ul></td></tr><tr><td class="confluenceTd"><ul><li>Compute, data store, and network resources &amp; zones</li><li><span>Firewall rules<br/></span></li></ul></td><td class="confluenceTd"><p><span>The same as the origin virtual machine. <br/></span>If there are no available resources on the same data store, network, and compute resource, you cannot clone a virtual machine. </p></td></tr><tr><td class="confluenceTd"><p>IP address</p></td><td class="confluenceTd"><p>A random IP address is assigned from an IP range in the origin network. After a virtual machine is cloned and before you start it, you should <a href=".Assigning-and-unassigning-IP-address-to-user-vVHS9.0_195792080.html">assign a new IP address</a>.</p></td></tr><tr><td class="confluenceTd">Swap disk</td><td class="confluenceTd">A new swap disk is created on the cloned virtual machine.</td></tr><tr><td colspan="1" class="confluenceTd"><p><span>Backups</span></p></td><td colspan="1" class="confluenceTd"><span>The backups of the origin virtual machine are not cloned. </span></td></tr></tbody></table></div><p><br/>To clone a virtual machine, follow the next procedure:</p><ol><li>Go to your Control Panel &gt; <strong>Cloud</strong> &gt; <strong>Virtual Servers</strong>.</li><li>Click a label of the virtual machine that you want to clone.</li><li>Click <strong>Actions</strong>, point to<strong> Options</strong>,<strong> </strong>and click <strong>Clone Virtual Server</strong>. </li><li>In the dialog box, you can change the properties if required:<ul><li><em>Label</em> </li><li><p><em>Hostname</em> - a hostname of the virtual machine. The hostname can consist of letters [A-Z a-z], digits [0-9], and a dash [ - ]. For more info on hostname validation, refer to <a style="text-decoration: none;" href="http://www.faqs.org/rfcs/rfc1123.html" class="external-link" rel="nofollow">RFC documentation</a>.</p><div id="expander-1740730441" class="expand-container"><div id="expander-control-1740730441" class="expand-control" aria-expanded="true"><span class="expand-icon aui-icon aui-icon-small aui-iconfont-chevron-down"></span><span class="expand-control-text">Additional Consideration for Windows</span></div><div id="expander-content-1740730441" class="expand-content"><p>The following symbols are not allowed for Windows-based virtual machines:</p><ul><li>Percent  [%]</li><li>Quotation marks [“ “]</li><li>Angle brackets [&lt;&gt;]</li><li>Vertical bar [ | ]</li><li>Caret [^]</li><li>Ampersand [&amp;]</li><li>Parentheses [( )]</li></ul></div></div><ul><li><p><em>Password</em> - password for the virtual machine. It can consist of 6-99 symbols, including letters [A-Z a-z], digits [0-9], dash [ - ], underscore [ _ ], and the following special characters:<span> </span>~ ! @ # $ * _ - + = ` \\ { } [ ] : ; ' , . ? /<span>. </span>You can use both lower and uppercase letters. If you don't enter a password, it will be generated automatically.</p></li><li><em>Password confirmation</em> - repeat the password to confirm it.</li><li><p><em>Encrypt password</em> - move the slider to the right to encrypt your password.</p></li></ul></li></ul></li><li>Click <strong>Clone Virtual Server </strong>to confirm the action. </li></ol><p>After you confirm the action, several transactions are run to complete the cloning process. You can check the status of each transaction in the <a href=".Logs-vVHS9.0_195791993.html">Activity Log</a> of the virtual machine. After the virtual machine is cloned, it is powered off until you <a href=".Managing-virtual-machine-power-options-vVHS9.0_195791526.html">start it</a>. </p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<hr/><h2 id="id-.ManagingvirtualmachinesvVHS9.0-migrateMigratingvirtualmachine"><span class="confluence-anchor-link" id="id-.ManagingvirtualmachinesvVHS9.0-migrate"></span>Migrating virtual machine</h2></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>You can migrate virtual machines using a <em>hot</em> or <em>cold</em> migration method:</p><ul><li><strong><a href="#id-.ManagingvirtualmachinesvVHS9.0-1">Hot migration</a></strong> is a live migration of a virtual machine without disks and NICs between compute resources that share common data stores or data store zones.</li><li><strong><a href="#id-.ManagingvirtualmachinesvVHS9.0-2">Cold migration</a></strong> is a migration of virtual machines with disks between compute resources with local storage or across compute zones.</li></ul><p>As an Admin, you can control user access to virtual machine migration. Using <a href=".Permissions-vVHS9.0_195791917.html">OnApp permissions</a>, you can allow/forbid users to perform migration of all virtual machines or their own machines. This is handled via the Control Panel &gt; Admin &gt; <strong>Roles </strong>menu.</p><hr/><h3 id="id-.ManagingvirtualmachinesvVHS9.0-Hotmigration"><strong>Hot migration</strong></h3><p><span>You can migrate an online virtual machine from one compute resource to another compute resource that is both utilizing local/shared/IS storage or across zones. </span></p><h4 id="id-.ManagingvirtualmachinesvVHS9.0-1Hotmigrationbetweencomputeresources"><span class="confluence-anchor-link" id="id-.ManagingvirtualmachinesvVHS9.0-1"></span>Hot migration between compute resources</h4><p>Before you begin, take into consideration the following: </p><ul><li>Check if your Windows template supports hot migration at the <a href="http://templates.repo.onapp.com/Windows_templates.html" class="external-link" rel="nofollow">Windows Templates</a>.</li><li><span>Migrating a virtual machine to a compute resource with <em>Any</em> operating system type has the next implications. </span><span>It won’t be possible to set the <em>Windows Only</em> type for a compute resource if there are any Linux or FreeBSD VMs residing on it. Likewise, it won't be possible to set the <em>Non Windows</em> type for a compute resource, if there are Windows-based VMs residing on it.</span></li><li>If both source and destination compute resources have backup IP addresses, VM migration will be performed using those backup IP addresses as an alternative network for traffic. If the migration fails for any reason, it will be retried using the destination compute resource IP address in the management network.</li></ul><h5 id="id-.ManagingvirtualmachinesvVHS9.0-Tomigrateonevirtualmachine"><span style="color: rgb(51,51,51);">To migrate one virtual machine</span></h5><ol><li>Go to your Control Panel &gt; <strong>Cloud</strong> &gt; <strong>Virtual Servers </strong>menu.</li><li>Click a label of a virtual machine that you want to migrate.</li><li>Click the <strong>Actions </strong>button, point to <strong>Options</strong>, and click the <strong>Migrate Virtual Server</strong> button.</li><li>In the <strong>Migration Type</strong> box, select <em>Compute Resource </em>and click <strong>Next</strong>. </li><li>Select a <em>Target compute resource</em> from the box and click <strong>Next</strong>. </li><li>At the final step of the wizard, you can see the migration summary and select the following: <ul><li><em>Cold-migrate when hot-migration fails</em> - select the check box to apply cold migration in case of the hot migration failure.</li><li><span style="color: rgb(0,0,0);"><em>Auto-converge - </em>select the preferable type of auto-converge functionality: </span><ul><li><span style="color: rgb(0,0,0);"><em>Minor - </em>auto-converge with default CPU throttling during migration.</span></li><li><span style="color: rgb(0,0,0);"><em>Moderate - </em>auto-converge with moderate CPU throttling.</span></li><li><span style="color: rgb(0,0,0);"><em>Aggressive - </em>auto-converge with aggressive CPU throttling.</span></li></ul></li></ul></li></ol><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><span style="color: rgb(0,0,0);"><em>Auto-converge </em>is only available for virtual machines based on KVM compute resources with CentOS 7 or higher. You can only select one type of <em>Auto-converge</em> at a time.</span></p></div></div><p>          7. When you are finished, click the<strong> Submit</strong> button.</p><h5 id="id-.ManagingvirtualmachinesvVHS9.0-Tomigratemultiplevirtualmachines"><span style="color: rgb(51,51,51);">To migrate multiple virtual machines</span></h5><p>You can also migrate multiple virtual machines at once from one compute resource to another compute resource of the same type (KVM to KVM). The mass migration is available within compute resources that belong to the same compute zone. To migrate virtual machines, follow the next steps: </p><ol><li>In the <strong>Admin</strong> &gt; <strong>Compute Resources</strong> section, click a compute zone label to see the list of compute resources. </li><li>Click a label of a destination compute resource. On the screen that appears, you will see a list of all virtual machines hosted on the compute resource.</li><li><p>Select checkboxes next to the virtual machines that you want to migrate and click the <strong>Migrate</strong> button. <span>To select all virtual machines residing on the compute resource, click the first checkbox. To cancel the selection of all virtual machines, click this checkbox again.</span></p></li><li>In the pop-up box, select the following options:<br/><ul><li><em>Target compute resource</em> - select a destination compute resource to migrate the virtual machines to.</li><li><p class="_mce_tagged_br"><em>Cold-migrate when hot-migration fails</em> - select the checkbox if you want to apply cold migration in case of the hot migration failure.</p><div class="confluence-information-macro has-no-icon confluence-information-macro-note"><div class="confluence-information-macro-body"><p>If some of the selected virtual machines have disks that run as local storage on this compute resource, these virtual machines could not be migrated. After the migration, these virtual machines remain on the previous compute resource, while other VMs are migrated to the destination compute resource.</p></div></div></li></ul></li><li>When you are finished, click the <strong>Submit</strong> button. </li></ol><p>After migration, the power status of your virtual machine remains the same as before the migration. If you migrate a virtual machine that is running, the whole process is almost unnoticeable.</p><h3 id="id-.ManagingvirtualmachinesvVHS9.0-2Coldmigration"><span class="confluence-anchor-link" id="id-.ManagingvirtualmachinesvVHS9.0-2"></span><strong>Cold migration</strong></h3><p><span>Cold migration enables you to migrate virtual machines with or without disks and NICs between compute resources with local storage or across compute zones. There are several prerequisites for the cold migration:</span></p><ul><li>You should shut down a virtual machine before performing the migration.</li><li>You can cold migrate a virtual machine NIC to a VXLAN/VLAN management network that is not shared by the source and destination compute resources. When you migrate a NIC to another network, only one IP address assigned to a virtual machine is migrated. </li><li><p>The bandwidth from compute resource to compute resource should be sufficient enough to allow transferring of virtual machines.</p></li><li>Cold migration is applicable to virtual machines with local storage. Be aware that migration will take more time if you want to perform it between shared data stores.</li><li>Be aware that <a href=".Managing-virtual-machine-disks-vVHS9.0_195791550.html">disk migration</a> is better than full VM migration in case you want to migrate the disks within the same compute zone and if the <a href=".Backup-servers-settings-vVHS9.0_195792116.html">advanced backup scheme</a> is used. Such a scenario is applicable only to the shared data stores within the same compute zone.</li></ul><p>To cold migrate a virtual machine with disks:</p><ol><li>Go to your Control Panel &gt; <strong>Cloud</strong> &gt; <strong>Virtual Servers </strong>menu.</li><li>Click a label of a virtual machine that you want to migrate.</li><li>Click the <strong>Actions </strong>button, point to <strong>Options</strong>, and click the <strong>Migrate Virtual Server</strong> button.</li><li>In the <strong>Migration Type</strong> box, select <em>Full Migrate (Cold)</em>.</li><li>Select <em>Migrate Storage </em>and/or <em>Migrate Networks</em><span> and click <strong>Next</strong>. </span> </li><li>Select the destinations to which to migrate a virtual machine:<br/><p><strong>Compute Resources<br/></strong></p><ul><li><em>Target compute zone</em> - select a destination compute zone.</li><li><em>Target compute resource - </em>select a destination compute resource.<br/>Click <strong>Next</strong><span> to proceed to the following step.</span></li></ul><p><strong>Storage Resources </strong></p><ul><li><em>Target data store for disk </em>- select a destination data store for each disk. The list includes available data stores associated with the compute zone and compute resource that you selected earlier.<br/>Click <strong>Next</strong><span> to proceed to the following step.</span></li></ul><p><strong>Network Resources<br/></strong></p><ul><li><em>Target network </em>- select a destination network for each network interface.</li><li><em>Target IP net - </em>select an IP net in a destination network .</li><li><em>Target IP range </em><em>- </em><span>select an IP range in a destination network.</span></li><li><em>Select and assign IP address </em>- <span>select an IP address to assign to a virtual machine. You can click <em>Free IPs</em> or <em>My IPs</em> to select from all free IP addresses or your own IP addresses. <br/>Click <strong>Next</strong> to proceed to the following step.<br/></span></li></ul></li><li>At the final step of the wizard, you can see the migration summary. Click<strong> Submit</strong> to start the migration<span>.</span></li></ol><div class="confluence-information-macro has-no-icon confluence-information-macro-information"><div class="confluence-information-macro-body"><ul><li><p class="p1"><span class="s1">You cannot migrate a virtual machine from a compute resource that is offline. </span></p></li><li><p class="p1"><span class="s1">If you have local backups on source compute resources, please move them manually to a destination compute resource or backup server.<br/></span></p></li><li><p class="p1"><span class="s1">If you change the compute resource or data store zone, the billing will be changed according to the prices set for that new zone in the bucket.<span> The new estimated price per hour for a VM is displayed at the bottom of the VM migration screen.</span></span></p></li><li>Go to <strong>Admin</strong> &gt;<strong> Settings</strong> &gt; <strong>Configuration</strong> &gt; <strong>Defaults</strong> &gt; <em>Migration options,</em> if you want to set migration rate limit and limit of transactions which can be run simultaneously on the target compute resource when migrating a VM.</li></ul></div></div></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<hr/><h2 id="id-.ManagingvirtualmachinesvVHS9.0-vip-statusSettingVIPStatusforVirtualMachine"><span class="confluence-anchor-link" id="id-.ManagingvirtualmachinesvVHS9.0-vip-status"></span>Setting VIP Status for Virtual Machine</h2></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>If a compute resource fails or reboots, the system migrates virtual machines to another compute resource, one VM at a time. The order VMs are migrated is random. However, you can give a virtual machine &quot;VIP&quot; status, and this will give that VM priority in the migration queue. <br/><br/>To set or remove VIP status for a VM:</p><ol><li>Go to your Control Panel &gt; <strong>Cloud</strong> &gt; <strong>Virtual Servers</strong> menu.</li><li>Use the icon in the <strong>VIP</strong> column next to a required virtual machine to change the switch on/off the VIP status.</li></ol></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<hr/><h2 id="id-.ManagingvirtualmachinesvVHS9.0-virshEnablingVirshConsole"><span class="confluence-anchor-link" id="id-.ManagingvirtualmachinesvVHS9.0-virsh"></span>Enabling Virsh Console</h2></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>You can use the Virsh console to access a virtual machine from a compute resource secure shell and perform various administrative tasks. You can enable the Virsh console for the following instances:</p><ul><li>Virtual machines that run on KVM compute resources.</li><li>Virtual machines that are built on Linux templates.</li><li>Virtual machines that are not built from ISO.</li></ul><p>You can enable <em>Default Virsh Console Policy</em> via <strong><a href=".Editing-defaults-configuration-vVHS9.0_195791640.html">Settings</a></strong> for all newly created virtual machines to have Virsh console by default. For virtual machines that are created before you edit the settings, you can enable the console as follows:</p><ol><li>Go to your Control Panel &gt; <strong>Cloud</strong> &gt; <strong>Virtual Servers</strong>.</li><li>Click a label of a destination virtual machine.</li><li>Click <strong>Actions, </strong>point to <strong>Options</strong>,<strong> </strong>and then click <strong>Enable Virsh Console</strong>. </li><li><span>In the dialogue box, click </span><strong>OK</strong><span> to confirm.</span></li></ol><p><span>After you confirm the action, the virtual machine is rebooted and you can access it via the Virsh console. <br/></span></p><p><span>To access the virtual machine via the Virsh console, follow the next steps:</span></p><ol><li><span>Connect via SSH to the destination compute resource. </span></li><li><p><span>Run the following command to list guest VMs using Virsh: <br/></span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">virsh list
Id    Name                           State
---------------------------------------------
1     freebsd						running
2     ubuntu						running
3     centos						running</pre>
</div></div></li><li><p>Run the following command from the compute resource to log in to the guest named <em>ubuntu</em>: </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">virsh console ubuntu</pre>
</div></div><p><span>To exit the console, press </span><strong>CTRL + 5</strong><span>.</span></p></li></ol></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<hr/><h2 id="id-.ManagingvirtualmachinesvVHS9.0-deleteDeletingVirtualMachine"><span class="confluence-anchor-link" id="id-.ManagingvirtualmachinesvVHS9.0-delete"></span>Deleting Virtual Machine</h2></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>Shut down the virtual machine before destroying it. If you are deleting a VM that is running, the VM will be deleted after the time set in the Timeout Before Shutting Down VM configuration parameter.<br/>To remove the virtual machine from the cloud:</p><ol><li>Go to your Control Panel &gt; <strong>Cloud</strong> &gt; <strong>Virtual Servers</strong> menu.</li><li>On the screen that appears, you'll see the list of all virtual machines in the cloud. Click the label of the virtual machine you want to delete.</li><li>On the virtual machine's screen, click the <strong>Actions </strong>button, point to <strong>Options</strong>, then select <strong>Delete Virtual Server</strong>.</li><li>Move the <strong>Move Last Backup to My Templates if it is present </strong>slider to the right if you want to save the last VM's backup as a template.</li><li>Move the <strong>Destroy All Existing Backups</strong> slider to the right if you want to remove all existing backups of this virtual machine.</li></ol><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>IMPORTANT:</p><ul><li>You won't be able to restore a virtual machine after deleting it.</li><li>Deleting a virtual machine removes all data stored on that virtual machine. To save the data stored on the virtual machine, back up your virtual machine and select the <strong>Move Last Backup to My Templates if it is present</strong><span> box when following the instructions described in this section.</span></li><li>To delete a virtual machine together with its backups, the user needs to have the <em>Destroy any backup</em> or <em>Destroy own backup</em> permission enabled. Otherwise, the backups of the VM deleted by the user will remain in the system.</li></ul></div></div></div>
</div>
</div>
</div>
                    </div>

                                                            <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/195792186/195792184.png">image2022-5-6_14-20-35.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/195792186/195792185.png">image2021-4-7_16-34-16.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 07, 2024 09:23</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
