<!DOCTYPE html>
<html>
    <head>
        <title>Virtuozzo Hybrid Server 9.0 Admin Guide : .Editing backups/templates configuration vVHS9.0</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Virtuozzo Hybrid Server 9.0 Admin Guide</a></span>
                            </li>
                                                    <li>
                                <span><a href="Virtuozzo-Hybrid-Server-9.0-Admin-Guide_195791490.html">Virtuozzo Hybrid Server 9.0 Admin Guide</a></span>
                            </li>
                                                    <li>
                                <span><a href="Control-Panel-Administration_195792528.html">Control Panel Administration</a></span>
                            </li>
                                                    <li>
                                <span><a href="Control-Panel-Configuration_195791594.html">Control Panel Configuration</a></span>
                            </li>
                                                    <li>
                                <span><a href="Configuration-Settings_195791606.html">Configuration Settings</a></span>
                            </li>
                                                    <li>
                                <span><a href="195791621.html">Edit Backups/Templates Configuration</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Virtuozzo Hybrid Server 9.0 Admin Guide : .Editing backups/templates configuration vVHS9.0
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Roksoliana Ben</span>, last modified on May 02, 2024
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <div class="contentLayout2">
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>This section contains information on how to edit a backup or template server, backup processes, incremental backups, and other application settings.</p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Ignore the options specified in your Control Panel but not mentioned in the documents.</p></div></div><p>To edit backup or template configuration, do the following:</p><ol><li>Go to your Control Panel &gt; <strong>Admin</strong> &gt; <strong>Settings</strong> menu, and click the <strong>Configuration</strong> icon.</li><li><p>Click the<strong> Backups/Templates</strong> tab to manage the following settings: </p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>If you change any settings here and save, the Control Panel server will restart OnApp services.</p></div></div></li></ol></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h3 id="id-.Editingbackups/templatesconfigurationvVHS9.0-templatesManageTemplates"><strong><span class="confluence-anchor-link" id="id-.Editingbackups/templatesconfigurationvVHS9.0-templates"></span>Manage Templates</strong></h3></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>To enable template update and install, set the following parameters:<strong> </strong></p><ul><li><p><em>Template server URL</em> - fill in the template server address: <a href="http://templates-manager.onapp.com/" class="external-link" rel="nofollow">http://templates-manager.onapp.com</a>. The template server address <a href="http://templates-manager.onapp.com/" class="external-link" rel="nofollow">http://templates-manager.onapp.com</a> is set automatically during the OnApp Control Panel install/upgrade process.</p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><span>After updating your Control Panel, the system does not save the customized value in the </span><em>Template server URL </em><span>box and changes it to the default </span><a href="http://templates-manager.onapp.com/" class="external-link" rel="nofollow">http://templates-manager.onapp.com</a><span>.</span></p></div></div></li><li><p><em>Delete template source after install -</em> enable this option to delete the downloaded templates after they were distributed.</p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Do not enable this option if the location of your templates is shared with the CP box. Otherwise, we recommend using this option to ensure the removal of recently downloaded templates to free up space on your Control Panel server.</p></div></div></li></ul></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h3 id="id-.Editingbackups/templatesconfigurationvVHS9.0-pathsPathsto"><strong><span class="confluence-anchor-link" id="id-.Editingbackups/templatesconfigurationvVHS9.0-paths"></span>Paths to</strong></h3></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>Sets paths for various OnApp files (shown here with default path examples):</p><ul><li><em>Templates -</em> <code>/onapp/templates</code></li><li><em>Recovery templates</em> - <code>/onapp/tools/recovery</code></li><li><em>Backups </em>- <code>/onapp/backups</code></li></ul></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h3 id="id-.Editingbackups/templatesconfigurationvVHS9.0-backupBackup/TemplateServer"><strong><span class="confluence-anchor-link" id="id-.Editingbackups/templatesconfigurationvVHS9.0-backup"></span>Backup/Template Server</strong></h3></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>Backups and templates can be stored on a remote server or a mounted disk. To store backups and templates remotely, configure the following settings:</p><ul><li><p><em>Allow incremental backups</em> - by default, this option is turned on to enable incremental backups. Incremental backups are an advanced method of taking backups. During the incremental backup, only the changes made after the last backup are archived instead of backing up the whole target.<strong> </strong>See <a href=".Managing-virtual-machine-backups-vVHS9.0_195791543.html">Virtual Machine Backups</a> for details.<strong> </strong>Incremental backups are not available for Windows virtual machines.</p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Ensure the <em>Allow incremental backups</em> option is turned on in the Beta version.</p></div></div><p><br/>If the <strong>Allow incremental backups</strong> option is enabled, the new provisioning scheme will be used (with unpacked templates). Otherwise, the system will use the traditional provisioning method.<br/>When the incremental backups option is enabled, the ability to create full backups will be disabled (except for the servers that do not support incremental backup type). Existing full backups will be still accessible via <strong>Backups </strong>&gt;<strong> Images</strong> menu.</p><div class="confluence-information-macro confluence-information-macro-warning"><span class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon"></span><div class="confluence-information-macro-body">If you are using incremental backups option AND <code>ssh_file_transfer</code> is disabled, you should either enable dedicated backup servers in your cloud or share the backups and templates folders (paths) between your compute resources.</div></div></li><li><p><em>Use SSH file transfer</em> - by default, this option is turned off which requires mounting the templates/backup server manually. It is not applicable to incremental backups.</p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Ensure the <em>Use SSH file transfer</em> option is turned off in the Beta version.</p></div></div></li><li><em>Server IP</em> - specify the IP address of the backup/template server.</li><li><em>User login</em> - the login used for remote server authentication. A password is not required, but it is required that you store a host key.</li><li><em>SSH options</em> - the SSH protocol options that set the rules and behavior of how to log into the remote server. By default, the options are set to omit adding new host keys to the host file and skip password authentication. They also specify the path where the host key is stored.</li></ul></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h3 id="id-.Editingbackups/templatesconfigurationvVHS9.0-processesBackupProcesses"><strong><span class="confluence-anchor-link" id="id-.Editingbackups/templatesconfigurationvVHS9.0-processes"></span>Backup Processes</strong></h3></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<ul><li><em>Total number allowed </em>- the maximum number of compute resources, backup servers, and data store backup processes allowed at once on the Control Panel.</li><li><p><em>Total per data store -</em> if this number exceeds the overall total, the overall total limit will be enforced.</p></li><li><p><em>Total per compute resource -</em> if this number exceeds the overall total, the overall total limit will be enforced.</p></li><li><p><em>Total per backup server</em> - if this number exceeds the overall total, the overall total limit will be enforced.</p><p>For example: if the total number allowed is 10, and the total per data store is 3, the total per backup server is 3, and the total per compute resource is set to 4, then up to 10 backups can be taken at once – 3 per data store, 3 per backup server, and 4 per compute resource.</p></li></ul></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h3 id="id-.Editingbackups/templatesconfigurationvVHS9.0-incrementalIncrementalBackups"><strong><span class="confluence-anchor-link" id="id-.Editingbackups/templatesconfigurationvVHS9.0-incremental"></span>Incremental Backups</strong></h3></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p><em>Minimum disk size calculation coefficient for template - </em>this parameter is for incremental backups only. During the backup conversion to template, backup’s size is multiplied by this coefficient to make sure that template will be slightly bigger than the actual size for correct performance.</p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h3 id="id-.Editingbackups/templatesconfigurationvVHS9.0-rsyncRsyncOptions"><strong><span class="confluence-anchor-link" id="id-.Editingbackups/templatesconfigurationvVHS9.0-rsync"></span>Rsync Options</strong></h3></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>These options are for clouds with enabled incremental backups. Your cloud must have a dedicated backup server configured with one of the following file systems: ext2, ext3, ext4, reiserfs, or xfs.</p><p><label class="boolean optional control-label" for="configuration_rsync_option_xattrs"><em>Store extended attributes</em></label> - enable this option to store extended attributes when taking incremental backups.<br/><label class="boolean optional control-label" for="configuration_rsync_option_acls"><em>Store ACLs</em></label> - enable this option to store access control lists.</p><h3 id="id-.Editingbackups/templatesconfigurationvVHS9.0-WindowsAuto-Backups"><span>Windows Auto-Backups</span></h3><p><span><em>Force Windows Auto-Backups - </em>enable this option to take raw disk image backups. This option is designed as an extreme measure when the backup cannot be taken due to NTFS file system problems.</span></p><p><span>3. Click the </span><strong>Save Configuration </strong><span>button to finish.</span></p></div>
</div>
</div>
</div>
                    </div>

                                        
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 07, 2024 09:23</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
